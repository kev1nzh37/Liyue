!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).liyue=t()}(this,(function(){"use strict";const e=e=>{let t="";const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=s.length;for(let o=0;o<e;o++)t+=s.charAt(Math.floor(Math.random()*n));return t};class t{tree=new Map;wrapperClass=null;constructor(e,t){this.init(e,t),this.tansformCss(),console.log(this.tree)}tansformCss(){const{tree:e,wrapperClass:t}=this;let s=[],n=e.get(t);this.nextCss(n,s);for(let e of s)if(console.log("loop ----------------------------"),null===e.parent)e.renderName=e.id;else{let t="",s=this.tree.get(e.parent);for(console.log(s);s.parent;)t+=s.id,s=this.tree.get(s.parent);e.renderName=t}console.log(s,n)}nextCss(e,t){if(e.children?.length)for(let s of e.children)this.nextCss(this.tree.get(s),t);t.push(e)}init(t,s,n=null){const o=[],r={},c=`${t}__${e(6)}`;Object.keys(s).forEach((e=>{const t=s[e];"string"==typeof t?r[e]=t:o.push(this.init(e,t,c))}));const l={style:r,children:o,parent:n,id:c};return null===n&&(this.wrapperClass=c),this.tree.set(c,l),c}}const s=(t,n,o,r)=>{const c=(t=>t.startsWith("#")?t:`${t}__${e(6)}`)(o),l=`${r||""} .${c}`;Object.keys(n).forEach((e=>{const r=n[e];var i;"object"==typeof r?s(t,r,e,l):(t[c]||(t[c]={cssStr:"",originName:c,renderName:l,selector:o}),t[c].cssStr+=`${i=e,i.replace(/([A-Z])/g,"-$1").toLowerCase()}:${r};`)}))};return{css:(e,n)=>{const o=((e,t)=>{const n={};return s(n,e,t),n})(n,e);console.log(o);const r=(e=>{let t="";return Object.keys(e).forEach((s=>{const{renderName:n,cssStr:o}=e[s];t+=`${n}{${o}}`})),t})(o),c=(e=>{const t={};return Object.keys(e).forEach((s=>{const{originName:n,selector:o}=e[s];var r;t[(r=o,r.replace(/\-(\w)/g,((e,t)=>t.toUpperCase())))]=n})),1===Object.keys(t).length?t.base:t})(o);return new t(e,n),(e=>{const t=document.createElement("style");t.setAttribute("type","text/css");const s=document.createTextNode(e);t.appendChild(s),document.head.appendChild(t)})(r),c}}}));
