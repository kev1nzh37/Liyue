!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).liyue=t()}(this,(function(){"use strict";class e{wrapperClass=null;tree=new Map;renderList=[];styleStr="";renderMap={};constructor(e,t){this.init(e,t),this.tansformCss(),this.transformStyleTextNode(),this.transformRenderMap(),(e=>{const t=document.createElement("style");t.setAttribute("type","text/css");const s=document.createTextNode(e);t.appendChild(s),document.head.appendChild(t)})(this.styleStr),console.log(this.tree,this.renderList,this.styleStr)}transformRenderMap(){const e={};this.renderList.forEach((t=>{var s;e[(s=t.seletor,s.replace(/\-(\w)/g,((e,t)=>t.toUpperCase())))]=t.id})),this.renderMap=e}tansformCss(){const{tree:e,wrapperClass:t}=this;let s=[],r=e.get(t);this.nextCss(r,s),this.renderList=s}transformStyleTextNode(){let e="";for(let t=this.renderList.length-1;t>=0;t--){const{renderName:s,styleStr:r}=this.renderList[t];r&&(e+=`.${s.reverse().join(" .")}{${r}}\n`)}this.styleStr=e}nextCss(e,t){if(e.children?.length)for(let s of e.children)this.nextCss(this.tree.get(s),t);if(null===e.parent)e.renderName=[e.id];else{let t=[e.id],s=this.tree.get(e.parent);for(;s;)t.push(s.id),s=this.tree.get(s.parent);e.renderName=t}t.push(e)}init(e,t,s=null){const r=[],n={};let i="";const o=`${e}__${(e=>{let t="";const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=s.length;for(let n=0;n<e;n++)t+=s.charAt(Math.floor(Math.random()*r));return t})(6)}`;return null===s&&(this.wrapperClass=o),Object.keys(t).forEach((e=>{const s=t[e];var l;"string"==typeof s?(n[e]=s,i+=`${l=e,l.replace(/([A-Z])/g,"-$1").toLowerCase()}:${s};`):r.push(this.init(e,s,o))})),this.tree.set(o,{style:n,styleStr:i,children:r,parent:s,id:o,seletor:e}),o}}return{css:(t,s)=>new e(t,s).renderMap}}));
