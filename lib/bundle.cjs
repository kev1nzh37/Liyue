const e=e=>{let t="";const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=r.length;for(let n=0;n<e;n++)t+=r.charAt(Math.floor(Math.random()*s));return t},t=e=>{const t=document.createElement("style");t.setAttribute("type","text/css");const r=document.createTextNode(e);t.appendChild(r),document.head.appendChild(t)};class r{wrapperClass=null;tree=new Map;renderList=[];styleStr="";renderMap={};constructor(e,r){this.init(e,r),this.tansformCss(),this.transformStyleTextNode(),this.transformRenderMap(),t(this.styleStr),console.log(this.tree,this.renderList,this.styleStr)}transformRenderMap(){const e={};this.renderList.forEach((t=>{var r;e[(r=t.seletor,r.replace(/\-(\w)/g,((e,t)=>t.toUpperCase())))]=t.id})),this.renderMap=e}tansformCss(){const{tree:e,wrapperClass:t}=this;let r=[],s=e.get(t);this.nextCss(s,r),this.renderList=r}transformStyleTextNode(){let e="";for(let t=this.renderList.length-1;t>=0;t--){const{renderName:r,styleStr:s}=this.renderList[t];s&&(e+=`.${r.reverse().join(" .")}{${s}}\n`)}this.styleStr=e}nextCss(e,t){if(e.children?.length)for(let r of e.children)this.nextCss(this.tree.get(r),t);if(null===e.parent)e.renderName=[e.id];else{let t=[e.id],r=this.tree.get(e.parent);for(;r;)t.push(r.id),r=this.tree.get(r.parent);e.renderName=t}t.push(e)}init(t,r,s=null){const n=[],o={};let i="";const a=`${t}__${e(6)}`;return null===s&&(this.wrapperClass=a),Object.keys(r).forEach((e=>{const t=r[e];var s;"string"==typeof t?(o[e]=t,i+=`${s=e,s.replace(/([A-Z])/g,"-$1").toLowerCase()}:${t};`):n.push(this.init(e,t,a))})),this.tree.set(a,{style:o,styleStr:i,children:n,parent:s,id:a,seletor:t}),a}}const s=(e,t)=>new r(e,t).renderMap,n=(t,r,s="")=>{Object.keys(r).forEach((o=>{const i=r[o];if("object"==typeof i){n(t,i,`${s}${o}-`)}else{const r={cssStr:i,originName:`--${s}${o}__${e(6)}`};t[o]=r}}))},o=new Map,i=e=>{const t={...e};return Object.keys(t).forEach((e=>{const r=t[e];if("string"==typeof r){const r=o.get(e);t[e]=`var(${r.originName})`}else t[e]=i(r)})),t},a=(e,r)=>{const s=(e=>{const t={};return n(t,e),t})(r),a=((e,t)=>{let r=`${e} {`;return Object.keys(t).forEach((e=>{const s=t[e];o.set(e,s),r+=`${s.originName}:${s.cssStr};`})),r+="}",r})(e,s),l=i(r);return t(a),l};export{a as createVars,s as css};
